zi ice depth"1" wait"2" lucid; zi snippet OMZP::fzf
zi ice depth"1"; zi light Aloxaf/fzf-tab

bindkey '^p' history-search-backward
bindkey '^n' history-search-forward
bindkey '^@' fzf-tab-complete

zi ice depth"1" wait"2" lucid; zi light zsh-users/zsh-syntax-highlighting

zi ice depth"1" wait"2" lucid; zi light z-shell/zsh-lsd

zi ice depth"1" wait"2" lucid; zi light zsh-users/zsh-autosuggestions

zi ice depth"1"; zi snippet OMZP::git

 ### End of plugins
 # # pyenv
 # export PYENV_ROOT="$HOME/.pyenv"
 # export PATH="$PYENV_ROOT/bin:$PATH"
 # zsh-defer eval "$(pyenv init -)" 

 # aliases
 alias py="python3"
 # alias nixsw="nixos-rebuild switch"
 # alias homesw="home-manager switch"

 # biome
 export BIOME_CONFIG_PATH="$HOME/dotfiles/nvim"

 # #fnm 
 # zsh-defer eval "$(fnm env --use-on-cd --shell zsh)"

 # pager
 export PAGER="less -X -F"

 # editor
 export EDITOR="nvim"

 # launch hyprland on login
 source ~/dotfiles/zshrc.d/auto-Hypr.sh

 #pnpm
 export PNPM_HOME="/root/.local/share/pnpm"
case ":$PATH:" in
  *":$PNPM_HOME:"*) ;;
  *) export PATH="$PNPM_HOME:$PATH" ;;
esac

timezsh() {
  shell=${1-$SHELL}
  for i in $(seq 1 10); do time $shell -i -c exit; done
}

source $HOME/.nix-profile/etc/profile.d/hm-session-vars.sh

my_zvm_vi_yank() {
  zvm_vi_yank
  echo -en "${CUTBUFFER}" | wl-copy -n 
}

my_zvm_vi_delete() {
  zvm_vi_delete
  echo -en "${CUTBUFFER}" | wl-copy -n
}

my_zvm_vi_change() {
  zvm_vi_change
  echo -en "${CUTBUFFER}" | wl-copy -n
}

my_zvm_vi_change_eol() {
  zvm_vi_change_eol
  echo -en "${CUTBUFFER}" | wl-copy -n
}

my_zvm_vi_put_after() {
  CUTBUFFER=$(wl-paste)
  zvm_vi_put_after
  zvm_highlight clear # zvm_vi_put_after introduces weird highlighting for me
}

my_zvm_vi_put_before() {
  CUTBUFFER=$(wl-paste)
  zvm_vi_put_before
  zvm_highlight clear # zvm_vi_put_before introduces weird highlighting for me
}

zvm_after_lazy_keybindings() {
  zvm_define_widget my_zvm_vi_yank
  zvm_define_widget my_zvm_vi_delete
  zvm_define_widget my_zvm_vi_change
  zvm_define_widget my_zvm_vi_change_eol
  zvm_define_widget my_zvm_vi_put_after
  zvm_define_widget my_zvm_vi_put_before

  zvm_bindkey visual 'y' my_zvm_vi_yank
  zvm_bindkey visual 'd' my_zvm_vi_delete
  zvm_bindkey visual 'x' my_zvm_vi_delete
  zvm_bindkey vicmd  'C' my_zvm_vi_change_eol
  zvm_bindkey visual 'c' my_zvm_vi_change
  zvm_bindkey vicmd  'p' my_zvm_vi_put_after
  zvm_bindkey vicmd  'P' my_zvm_vi_put_before
}
